# vite-plugin-feature-flag

ä¸€ä¸ªç”¨äº Vite é¡¹ç›®çš„åŠŸèƒ½å¼€å…³ï¼ˆFeature Flagï¼‰æ’ä»¶ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨æ„å»ºæ—¶æˆ–è¿è¡Œæ—¶æ§åˆ¶åŠŸèƒ½çš„å¯ç”¨å’Œç¦ç”¨ã€‚

## é€‚ç”¨åœºæ™¯

- AB Test: çŸ­æœŸå†…ä¸Šçº¿ä¸€éƒ¨åˆ†å«æœ‰ ab é€»è¾‘çš„ä»£ç ï¼Œåç»­ä¸šåŠ¡å®éªŒç»“æœå‡ºæ¥ä»¥åï¼Œå¯èƒ½å†³å®šæ˜¯ä¸‹çº¿è¿˜æ˜¯é‡‡ç”¨éƒ¨åˆ†ä»£ç ï¼Œå¯ä»¥ç»“åˆæ„å»ºå·¥å…·åˆ é™¤æŒ‡å®šæ³¨é‡Šæ’ä»¶ä½¿ç”¨ï¼›
- Feature Flag: æ¯”å¦‚å†…æµ‹ç‰ˆä½“éªŒåŠŸèƒ½ï¼ŒçŸ­æœŸå†…åªåœ¨å†…ç½‘æˆ–è€…æŒ‡å®šæ¡ä»¶ä¸‹ä½¿ç”¨ï¼Œç­‰åˆ°ä¸€å®šæ—¶é—´å†…å†³å®šæ˜¯é‡‡ç”¨è¿˜æ˜¯ä¸‹çº¿ï¼Œå¯ä»¥ç»“åˆæ„å»ºå·¥å…·åˆ é™¤æŒ‡å®šæ³¨é‡Šæ’ä»¶ä½¿ç”¨ï¼›

## ç‰¹æ€§

- ğŸš€ è½»é‡çº§ Vite æ’ä»¶å®ç°
- âš™ï¸ æ”¯æŒæ„å»ºæ—¶å’Œè¿è¡Œæ—¶åŠŸèƒ½å¼€å…³æ§åˆ¶
- ğŸ“¦ æ˜“äºé…ç½®å’Œä½¿ç”¨
- ğŸ”„ æ”¯æŒ TypeScript
- ğŸ§ª åŒ…å«æµ‹è¯•ç”¨ä¾‹

## å®‰è£…

```bash
npm install vite-plugin-feature-flag -D
# æˆ–
yarn add vite-plugin-feature-flag -D
# æˆ–
pnpm add vite-plugin-feature-flag -D
```

## ä½¿ç”¨

### é…ç½®

```javascript
import { defineConfig } from 'vite';
import featureFlagPlugin from 'vite-plugin-feature-flag';
export default defineConfig({
  plugins: [featureFlagPlugin()],
});
```

### ä»£ç ä¸­ä½¿ç”¨

```jsx
import './App.css';

const App = () => {
  // @delete-start
  console.log('è¿™æ®µ log ä¸æ˜¾ç¤º');
  // @delete-end
  console.log('è¿™æ®µ log æ˜¾ç¤º');
  return (
    <div>
      {/* @delete-start */}
      <h1>è¿™æ®µæ–‡æœ¬ä¸æ˜¾ç¤º</h1>
      {/* @delete-end */}
    </div>
  );
};

export default App;
```

## é…ç½®é¡¹

| å±æ€§    | ç±»å‹                           | æè¿°                         |
| ------- | ------------------------------ | ---------------------------- |
| enforce | `'pre' \| 'post'`              | æŒ‡å®šæ’ä»¶æ‰§è¡Œçš„é¡ºåºé˜¶æ®µ       |
| include | `string \| string[] \| RegExp` | æŒ‡å®šéœ€è¦å¤„ç†çš„æ–‡ä»¶æˆ–ç›®å½•è·¯å¾„ |
| exclude | `string \| string[] \| RegExp` | æŒ‡å®šéœ€è¦æ’é™¤çš„æ–‡ä»¶æˆ–ç›®å½•è·¯å¾„ |
| rules   | `Rule[]`                       | åŠŸèƒ½å¼€å…³è§„åˆ™æ•°ç»„             |

### Rule

| å±æ€§      | ç±»å‹       | æè¿°               |
| --------- | ---------- | ------------------ |
| rule      | `boolean`  | è¯¥è§„åˆ™æ˜¯å¦å¯ç”¨     |
| start     | `string`   | å¯ç”¨çš„å¼€å§‹æ ‡è®°     |
| end       | `string`   | å¯ç”¨çš„ç»“æŸæ ‡è®°     |
| fileTypes | `string[]` | å¯ç”¨çš„æ–‡ä»¶ç±»å‹é›†åˆ |
